<div class="py-10 px-4 md:px-[120px] md:py-[64px] h-screen mb-20 bg-gray-100">
  <div class="w-full">
    <button
      class="flex text-[24px] gap-3 leading-[28px] font-[500] items-center text-[#101828] hover:text-gray-800"
      (click)="goBack()"
    >
      <i class="pi pi-arrow-left"></i>
      Checkout
    </button>

    <!-- Stepper -->
    <div class="mt-6">
      <!-- Step 1: Contact Information -->
      <div class="py-4 border-b">
        <div class="flex items-start md:mb-4">
          <span
            class="w-9 h-9 flex items-center justify-center bg-[#F2F4F7] text-[#667085] border border-[#EAECF0] rounded-full mr-3"
            >1</span
          >
          <div class="w-full">
            <p
              class="text-[24px] gap-3 mt-1 leading-[28px] font-[500] text-[#101828]"
            >
              Contact Information
            </p>
            <div
              *ngIf="userId"
              class="flex items-center justify-between w-full"
            >
              <p class="text-sm text-[#14151A] font-[500]">{{ email }}</p>
              <!-- <button
                class="bg-[#FFFFFF] text-black w-[58px] h-[40px] md:-mt-8 border border-[#DEE0E3] py-2.5 px-3 flex items-center justify-center rounded-xl"
                (click)="editEmail()"
              >
                Edit
              </button> -->
            </div>
          </div>
        </div>

        <!-- Email Input -->
        <!-- <div *ngIf="!emailExists">
          <p class="text-sm text-[#14151A] font-[500]">Enter your work email</p>
          <div class="flex mt-2 space-x-2">
            <input
              type="email"
              name="email"
              placeholder="John@yahoo.com"
              [(ngModel)]="email"
              class="w-full border border-[#DEE0E3] rounded-xl px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500"
            />
            <button
              class="bg-[#9241DC] text-white w-[93px] h-[40px] py-2.5 px-3 flex items-center justify-center rounded-xl hover:bg-purple-700"
              (click)="checkEmail()"
            >
              Continue
            </button>
          </div>
          <p *ngIf="showError" class="text-red-500 text-sm mt-2">
            Email does not exist
          </p>
        </div> -->

        <!-- Login Link -->
        <!-- <p
          [hidden]="emailExists"
          class="text-sm text-[#14151A] mt-4 font-[500]"
        >
          Already have an account?
          <a href="#" class="text-[#9241DC] font-medium hover:underline"
            >Login now</a
          >
        </p> -->
      </div>

      <div class="flex flex-col py-4">
        <div class="flex items-center gap-2">
          <span
            class="w-9 h-9 flex items-center justify-center bg-[#F2F4F7] text-[#667085] border border-[#EAECF0] rounded-full"
            >2</span
          >
          <p class="text-[24px] mt-1 leading-[28px] font-[500] text-[#101828]">
            Promo code
          </p>
        </div>
        <div class="mt-4 flex flex-col md:flex-row items-center gap-2">
          <input
            type="text"
            name="promoCode"
            placeholder="Promo code"
            [(ngModel)]="promoCode"
            class="w-full border border-[#DEE0E3] rounded-xl px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500"
          />
          <button
            type="button"
            class="bg-white text-black border border-gray-300 md:w-52 w-full h-[40px] py-2.5 px-3 flex items-center justify-center rounded-xl"
            (click)="applyPromoCode()"
          >
            Apply
          </button>
        </div>
        <p
          *ngIf="successMessage"
          class="w-full bg-green-100 mt-2 text-green-500 p-2 rounded-md"
        >
          {{ successMessage }}
        </p>
        <p
          *ngIf="errorMessage"
          class="w-full bg-red-100 mt-2 text-red-500 p-2 rounded-md"
        >
          {{ errorMessage }}
        </p>
      </div>

      <!-- Step 2: Payment -->
      <div class="flex items-center py-4">
        <span
          class="w-9 h-9 flex items-center justify-center bg-[#F2F4F7] text-[#667085] border border-[#EAECF0] rounded-full mr-3"
          >3</span
        >
        <p class="text-[24px] gap-3 leading-[28px] font-[500] text-[#101828]">
          Payment
        </p>
      </div>
      <div *ngIf="userId" class="mt-4">
        <form id="payment-form" (submit)="createPaymentIntent()">
          <div id="payment-element">
            <!-- i want to change the style of the form to make the mm and yy to be in expire data, and cvv to be inputs  -->
          </div>
          <!-- <div class="mt-4 flex flex-col md:flex-row items-center gap-2">
            <input
              type="text"
              name="promoCode"
              placeholder="Promo code"
              [(ngModel)]="promoCode"
              class="w-full border border-[#DEE0E3] rounded-xl px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500"
            />
            <button
              type="button"
              class="bg-white text-black border border-gray-300 md:w-52 w-full h-[40px] py-2.5 px-3 flex items-center justify-center rounded-xl"
              (click)="applyPromoCode()"
            >
              Apply
            </button>
          </div> -->
          <div class="mt-4">
            <div class="flex justify-between">
              <span>Subtotal:</span>
              <span>{{ subTotalAmount | currency }}</span>
            </div>
            <div class="flex justify-between">
              <span>Discount:</span>
              <span>{{ discountValue | currency }}</span>
            </div>
            <div class="flex justify-between font-bold">
              <span>Total:</span>
              <span>{{ totalAmount | currency }}</span>
            </div>
          </div>
          <button
            id="submit"
            class="bg-[#9241DC] text-white w-full h-[40px] py-2.5 px-3 flex items-center justify-center rounded-xl hover:bg-purple-700 mt-4"
          >
            Pay
          </button>
          <p
            *ngIf="errorPayment"
            class="w-full bg-red-100 mt-2 text-red-500 p-2 rounded-md"
          >
            {{ errorPayment }}
          </p>
          <p id="payment-error" role="alert"></p>
          <p class="result-message hidden">
            Payment succeeded, see the result in your
            <a href="" target="_blank">Stripe dashboard.</a> Refresh the page to
            pay again.
          </p>
        </form>
      </div>
    </div>
  </div>
</div>
